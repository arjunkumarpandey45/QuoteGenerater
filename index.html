<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quote of the Day</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
    <button id="toggle-dark">Dark Mode</button>
  <div class="quote-box">
    <h2>Quote of the Day</h2>
    <blockquote id="quote">Loading...</blockquote>
    <span id="author">Loading...</span>
    <div>
      <button onclick="getQuote()">New Quote</button>
      <button onclick="tweetQuote()"><img src="download.png" alt="Tweet">Tweet</button>
      <button onclick="whatsappQuote()"><img src="images.png" alt="WhatsApp">WhatsApp</button>
    </div>
  </div>

  <script>
    let toggleBtn = document.getElementById("toggle-dark");

window.addEventListener('DOMContentLoaded', () => {
  if (localStorage.getItem('theme') === 'dark') {
    document.body.classList.add("dark-mode");
    toggleBtn.innerText = "Light Mode";
  } else {
    toggleBtn.innerText = "Dark Mode";
  }
});

toggleBtn.addEventListener("click", () => {
  document.body.classList.toggle("dark-mode");
  if (document.body.classList.contains("dark-mode")) {
    localStorage.setItem("theme", "dark");
    toggleBtn.innerText = "Light Mode";
  } else {
    localStorage.setItem("theme", "light");
    toggleBtn.innerText = "Dark Mode";
  }
});

    function getQuote() {
      const api_url = "https://api.allorigins.win/get?url=" +
        encodeURIComponent("https://zenquotes.io/api/random?ts=" + Date.now());

      fetch(api_url)
        .then(response => response.json())
        .then(dataWrapped => {
          const data = JSON.parse(dataWrapped.contents);
          document.getElementById("quote").innerText = data[0].q;
          document.getElementById("author").innerText = `â€” ${data[0].a}`;
        })
        .catch(error => {
          document.getElementById("quote").innerText = "Failed to load quote.";
          document.getElementById("author").innerText = "";
        });
    }

    function tweetQuote() {
      const quote = document.getElementById("quote").innerText;
      const author = document.getElementById("author").innerText;
      const tweetUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(quote + " " + author)}`;
      window.open(tweetUrl, '_blank');
    }

    function whatsappQuote() {
      const quote = document.getElementById("quote").innerText;
      const author = document.getElementById("author").innerText;
      const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(quote + " " + author)}`;
      window.open(whatsappUrl, '_blank');
    }

    // Load first quote automatically
    getQuote();

  </script>
  
</body>
</html>
